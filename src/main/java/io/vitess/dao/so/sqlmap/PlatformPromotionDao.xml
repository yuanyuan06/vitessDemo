<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="io.vitess.dao.so.PlatformPromotionDao">

    <resultMap id="TtdPlatformPromotionResult" type="io.vitess.model.so.PlatformPromotion">
    </resultMap>

    <!-- 用于select查询公用抽取的列 -->
    <sql id="ttdPlatformPromotionColumns">
        <![CDATA[
	        	ID as id,
	        	SALES_ORDER_ID as salesOrder,
	        	SALES_ORDER_LINE_ID as salesOrderLine,
	        	SCOPE_TYPE as scopeType,
	        	PLATFORM_ORDER_CODE as platformOrderCode,
	        	PLATFORM_LINE_ID as platformLineId,
	        	PROMOTION_NAME as promotionName,
	        	GIFT_ITEM_NAME as giftItemName,
	        	DISCOUNT_FEE as discountFee,
	        	GIFT_ITEM_ID as giftItemId,
	        	GIFT_ITEM_NUM as giftItemNum,
	        	DESCRIPTION as description,
	        	PROMOTION_ID as promotionId,
	        	SHOP_ID as shopId
	    ]]>
    </sql>

    <!-- useGeneratedKeys="true" keyProperty="xxx" for sqlserver and mysql -->
    <insert id="insert" parameterType="io.vitess.model.so.PlatformPromotion"

            flushCache="true">
        <![CDATA[
		        INSERT INTO
		        t_td_platform_promotion (
		        id,
		        	SALES_ORDER_ID ,
		        	SALES_ORDER_LINE_ID ,
		        	SCOPE_TYPE ,
		        	PLATFORM_ORDER_CODE ,
		        	PLATFORM_LINE_ID ,
		        	PROMOTION_NAME ,
		        	GIFT_ITEM_NAME ,
		        	DISCOUNT_FEE ,
		        	GIFT_ITEM_ID ,
		        	GIFT_ITEM_NUM ,
		        	DESCRIPTION ,
		        	PROMOTION_ID ,
		        	SHOP_ID
		        ) VALUES (
		        #{id,javaType=java.lang.Long,jdbcType=BIGINT} ,
		        	#{salesOrder,javaType=Long,jdbcType=BIGINT} ,
		        	#{salesOrderLine,javaType=Long,jdbcType=BIGINT} ,
		        	#{scopeType,javaType=Integer,jdbcType=INTEGER} ,
		        	#{platformOrderCode,javaType=String,jdbcType=VARCHAR} ,
		        	#{platformLineId,javaType=Long,jdbcType=BIGINT} ,
		        	#{promotionName,javaType=String,jdbcType=VARCHAR} ,
		        	#{giftItemName,javaType=String,jdbcType=VARCHAR} ,
		        	#{discountFee,javaType=java.math.BigDecimal,jdbcType=DECIMAL} ,
		        	#{giftItemId,javaType=String,jdbcType=VARCHAR} ,
		        	#{giftItemNum,javaType=Integer,jdbcType=INTEGER} ,
		        	#{description,javaType=String,jdbcType=VARCHAR} ,
		        	#{promotionId,javaType=String,jdbcType=VARCHAR} ,
		        	#{shopId,javaType=Long,jdbcType=BIGINT}
		        )
		    ]]>

    </insert>

    <select id="findById" parameterType="java.lang.Long" resultMap="TtdPlatformPromotionResult" flushCache="false">
        select <include refid="ttdPlatformPromotionColumns" />
        <![CDATA[
			    from t_td_platform_promotion
		        where
		        ID = #{id}
		    ]]>
    </select>


    <select id="findSoPlatformPromotionBySoId" resultType="io.vitess.model.so.PlatformPromotion"></select>
    <select id="findBySoLineId" resultType="io.vitess.model.so.PlatformPromotion"></select>
    <select id="findBySoLineIdAndPlatformLineId" resultType="io.vitess.model.so.PlatformPromotion"></select>
</mapper>