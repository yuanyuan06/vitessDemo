<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="io.vitess.dao.so.SalesOrderDao">

    <resultMap id="TtdSalesOrderResult" type="io.vitess.model.so.SalesOrder">
    </resultMap>

    <!-- 用于select查询公用抽取的列 -->
    <sql id="ttdSalesOrderColumns">
        <![CDATA[
	        	ID as id,
	        	TRADE_ID as trade,
	        	PLATFORM_ORDER_CODE as platformOrderCode,
	        	PLATFORM_ORDER_CODE_N as platformOrderCodeN,
	        	TB_CREATE_TIME as platformCreateTime,
	        	TB_PAYMENT_TIME as platformPaymentTime,
	        	OMS_ORDER_CODE as omsOrderCode,
	        	ERP_ORDER_CODE as erpOrderCode,
	        	SUSPEND_REASON_TYPE as suspendReasonType,
	        	SPECIAL_TYPE as specialType,
	        	ORDER_STATUS as orderStatus,
	        	ORDER_TYPE as orderType,
	        	DELIVERY_TYPE as deliveryType,
	        	IS_INSTALL as isInstall,
	        	INSTALL_COMPANY_CODE as installCompanyCode,
	        	INSTALL_COMPANY_NAME as installCompanyName,
	        	FINANCE_STATUS as financeStatus,
	        	HOME_DELIVERY_FEE as homeDeliveryFee,
	        	DELIVERY_AND_INSTALL_FEE as deliveryAndInstallFee,
	        	INSTALL_FEE as installFee,
	        	SERVICE_ITEM_FEE as serviceItemFee,
	        	FINANCE_TOTAL_AMOUNT as financeTotalAmount,
	        	ALIPAY_ACCOUNT as payAccount,
	        	ALIPAY_NO as payNo,
	        	ERP_SHOP_CODE as companyShop,
	        	SALES_MODES_STR as salesModesStr,
	        	CREATE_TIME as createTime,
	        	WAREHOUSE_CODE as warehouseCode,
	        	SYNC_TO_ERP_TIME as syncToErpTime,
	        	ERP_RESPONSE_TIME as erpResponseTime,
	        	CANCEL_TIME as cancelTime,
	        	TRANS_TO_WAREHOUSE_TIME as transToWarehouseTime,
	        	STOCK_OUT_TIME as stockOutTime,
	        	FINISH_TIME as finishTime,
	        	HEAD_DISCOUNT as headDiscount,
	        	LINES_DISCOUNT as linesDiscount,
	        	DISCOUNT_TOTAL as discountTotal,
	        	AMOUNT_BEFORE_DISCOUNT as amountBeforeDiscount,
	        	AMOUNT_AFTER_DISCOUNT as amountAfterDiscount,
	        	PAYMENT_DISCOUNT as paymentDiscount,
	        	TOTAL_OUTER_POINT as totalOuterPoint,
	        	TOTAL_INNER_POINT as totalInnerPoint,
	        	USE_POINT as usePoint,
	        	VIRTUAL_AMOUNT as virtualAmount,
	        	MAIN_PAYMENT_TYPE as mainPaymentType,
	        	TRANS_FEE as transFee,
	        	SELLER_MEMO as sellerMemo,
	        	BUYER_MEMO as buyerMemo,
	        	SYS_MEMO as sysMemo,
	        	NEED_PACKING as neededPacking,
	        	NEED_INVOICE as needInvoice,
	        	IS_BILLING_MANUAL as isBillingManual,
	        	INVOICE_MEMO as invoiceMemo,
	        	INVOICE_TYPE as invoiceType,
	        	INVOICE_TITLE as invoiceTitle,
	        	INVOICE_CONTENT as invoiceContent,
	        	IS_BILLING_INVOICE_DETAIL as isBillingInvoiceDetail,
	        	VA_TAX_COMPANY_NAME as vaTaxCompanyName,
	        	VA_TAX_CODE as vaTaxCode,
	        	VA_TAX_REGISTER_ADDRESS as vaTaxRegisterAddress,
	        	VA_TAX_TELEPHONE as vaTaxTelephone,
	        	VA_TAX_BANK_NAME as vaTaxBankName,
	        	VA_TAX_BANK_CARD as vaTaxBankCard,
	        	SOURCE_REMARK as sourceRemark,
	        	PLATFORM_SOURCE as platformSource,
	        	TERMINAL_SOURCE as terminalSource,
	        	ACTIVITY_SOURCE as activitySource,
	        	SUB_ORDER_SOURCE as subOrderSource,
	        	IS_CYCLE as isCycle,
	        	IS_PRESALE as isPresale,
	        	EST_ARRIVAL_TIME as estArrivalTime,
	        	WF_BRANCH as wfBranch,
	        	CREATE_AU_USER_ID as creator,
	        	LAST_MODIFY_AU_USER_ID as lastModifyUser,
	        	VERSION as version,
	        	VMI_PROMOTION_CODE as vmiPromotionCode,
	        	SPLIT_SOURCE_OMS_ORDER_CODE as splitSourceOmsOrderCode,
	        	COPY_SOURCE_OMS_ORDER_CODE as copySourceOmsOrderCode,
	        	RA_OMS_ORDER_CODE as raOmsOrderCode,
	        	POS_SALES as posSales,
	        	ORIGINAL_POCN as originalPocn,
	        	SOURCE_TYPE as sourceType,
	        	EXT_VC1 as extVc1,
	        	EXT_VC2 as extVc2,
	        	EXT_VC3 as extVc3,
	        	TO_WH_REMARK as toWhRemark,
	        	CARE_GRADE as careGrade,
	        	CARE_MOMO as careMomo,
	        	IS_CLOUD_STACK_SO as isCloudStackSo,
	        	MAIN_BRANCH_WH_CODE as mainBranchWhCode,
	        	IS_AUTO_WH as isAutoWh,
	        	GOODS_WEIGHT as goodsWeight,
	        	ALIPAY_ID as alipayId,
	        	CREDIT_CARD_FEE as creditCardFee,
	        	PLATFORM_TRADE_TYPE as platformTradeType,
	        	IS_DIRECT_WMS_ORDER as isDirectWmsOrder,
	        	SPLIT_ORDER_TIME as splitOrderTime,
	        	IS_ASSIGN_WH as isAssignWh,
	        	INVOICE_KIND as invoiceKind,
	        	ORDER_TAX_FEE as orderTaxFee,
	        	IS_BUNDLE as isBundle,
	        	CUSTOMIZATION_MEMO as customizationMemo,
	        	ORDER_ROUTE_STATUS as orderRouteStatus,
	        	IS_ORDER_ROUTE as isOrderRoute,
	        	IS_OMNICHANNEL_PARAM as isOmnichannelParam,
	        	TARGET_CODE as targetCode,
	        	UPDATE_ROUTE_TIME as updateRouteTime,
	        	ALLOCATION_CODE as allocationCode,
	        	BUYER_TAX_NO as buyerTaxNO,
	        	STEP_PAID_FEE as stepPaidFee,
	        	IS_ADDR_CHANGED as isAddrChanged,
	        	BUSINESS_TYPE as businessType,
	        	WH_LOCATION_CODE as whLocationCode,
	        	IS_SUPPORT_PRE_PACKAGE as isSupportPrePackage,
	        	STEP_PAY_TIME as stepPayTime,
	        	ORIGINAL_TARGET_CODE as originalTargetCode,
	        	TAG_NAME as tagName,
	        	TRANS_TYPE as transType,
	        	COUPON_FEE as couponFee
	    ]]>
    </sql>

    <!-- useGeneratedKeys="true" keyProperty="xxx" for sqlserver and mysql -->
    <insert id="insert" parameterType="io.vitess.model.so.SalesOrder" flushCache="true" useGeneratedKeys="true" keyProperty="id">
        <![CDATA[
		        INSERT INTO
		        t_td_sales_order (
		        id,
		        	TRADE_ID ,
		        	PLATFORM_ORDER_CODE ,
		        	PLATFORM_ORDER_CODE_N ,
		        	TB_CREATE_TIME ,
		        	TB_PAYMENT_TIME ,
		        	OMS_ORDER_CODE ,
		        	ERP_ORDER_CODE ,
		        	SUSPEND_REASON_TYPE ,
		        	SPECIAL_TYPE ,
		        	ORDER_STATUS ,
		        	ORDER_TYPE ,
		        	DELIVERY_TYPE ,
		        	IS_INSTALL ,
		        	INSTALL_COMPANY_CODE ,
		        	INSTALL_COMPANY_NAME ,
		        	FINANCE_STATUS ,
		        	HOME_DELIVERY_FEE ,
		        	DELIVERY_AND_INSTALL_FEE ,
		        	INSTALL_FEE ,
		        	SERVICE_ITEM_FEE ,
		        	FINANCE_TOTAL_AMOUNT ,
		        	ALIPAY_ACCOUNT ,
		        	ALIPAY_NO ,
		        	ERP_SHOP_CODE ,
		        	SALES_MODES_STR ,
		        	CREATE_TIME ,
		        	WAREHOUSE_CODE ,
		        	SYNC_TO_ERP_TIME ,
		        	ERP_RESPONSE_TIME ,
		        	CANCEL_TIME ,
		        	TRANS_TO_WAREHOUSE_TIME ,
		        	STOCK_OUT_TIME ,
		        	FINISH_TIME ,
		        	HEAD_DISCOUNT ,
		        	LINES_DISCOUNT ,
		        	DISCOUNT_TOTAL ,
		        	AMOUNT_BEFORE_DISCOUNT ,
		        	AMOUNT_AFTER_DISCOUNT ,
		        	PAYMENT_DISCOUNT ,
		        	TOTAL_OUTER_POINT ,
		        	TOTAL_INNER_POINT ,
		        	USE_POINT ,
		        	VIRTUAL_AMOUNT ,
		        	MAIN_PAYMENT_TYPE ,
		        	TRANS_FEE ,
		        	SELLER_MEMO ,
		        	BUYER_MEMO ,
		        	SYS_MEMO ,
		        	NEED_PACKING ,
		        	NEED_INVOICE ,
		        	IS_BILLING_MANUAL ,
		        	INVOICE_MEMO ,
		        	INVOICE_TYPE ,
		        	INVOICE_TITLE ,
		        	INVOICE_CONTENT ,
		        	IS_BILLING_INVOICE_DETAIL ,
		        	VA_TAX_COMPANY_NAME ,
		        	VA_TAX_CODE ,
		        	VA_TAX_REGISTER_ADDRESS ,
		        	VA_TAX_TELEPHONE ,
		        	VA_TAX_BANK_NAME ,
		        	VA_TAX_BANK_CARD ,
		        	SOURCE_REMARK ,
		        	PLATFORM_SOURCE ,
		        	TERMINAL_SOURCE ,
		        	ACTIVITY_SOURCE ,
		        	SUB_ORDER_SOURCE ,
		        	IS_CYCLE ,
		        	IS_PRESALE ,
		        	EST_ARRIVAL_TIME ,
		        	WF_BRANCH ,
		        	CREATE_AU_USER_ID ,
		        	LAST_MODIFY_AU_USER_ID ,
		        	VERSION ,
		        	VMI_PROMOTION_CODE ,
		        	SPLIT_SOURCE_OMS_ORDER_CODE ,
		        	COPY_SOURCE_OMS_ORDER_CODE ,
		        	RA_OMS_ORDER_CODE ,
		        	POS_SALES ,
		        	ORIGINAL_POCN ,
		        	SOURCE_TYPE ,
		        	EXT_VC1 ,
		        	EXT_VC2 ,
		        	EXT_VC3 ,
		        	TO_WH_REMARK ,
		        	CARE_GRADE ,
		        	CARE_MOMO ,
		        	IS_CLOUD_STACK_SO ,
		        	MAIN_BRANCH_WH_CODE ,
		        	IS_AUTO_WH ,
		        	GOODS_WEIGHT ,
		        	ALIPAY_ID ,
		        	CREDIT_CARD_FEE ,
		        	PLATFORM_TRADE_TYPE ,
		        	IS_DIRECT_WMS_ORDER ,
		        	SPLIT_ORDER_TIME ,
		        	IS_ASSIGN_WH ,
		        	INVOICE_KIND ,
		        	ORDER_TAX_FEE ,
		        	IS_BUNDLE ,
		        	CUSTOMIZATION_MEMO ,
		        	ORDER_ROUTE_STATUS ,
		        	IS_ORDER_ROUTE ,
		        	IS_OMNICHANNEL_PARAM ,
		        	TARGET_CODE ,
		        	UPDATE_ROUTE_TIME ,
		        	ALLOCATION_CODE ,
		        	BUYER_TAX_NO ,
		        	STEP_PAID_FEE ,
		        	IS_ADDR_CHANGED ,
		        	BUSINESS_TYPE ,
		        	WH_LOCATION_CODE ,
		        	IS_SUPPORT_PRE_PACKAGE ,
		        	STEP_PAY_TIME ,
		        	ORIGINAL_TARGET_CODE ,
		        	TAG_NAME ,
		        	TRANS_TYPE ,
		        	COUPON_FEE
		        ) VALUES (
		        #{id,javaType=java.lang.Long,jdbcType=BIGINT} ,
		        	#{trade,javaType=Long,jdbcType=BIGINT} ,
		        	#{platformOrderCode,javaType=String,jdbcType=VARCHAR} ,
		        	#{platformOrderCodeN,javaType=String,jdbcType=VARCHAR} ,
		        	#{platformCreateTime,javaType=java.util.Date,jdbcType=TIMESTAMP} ,
		        	#{platformPaymentTime,javaType=java.util.Date,jdbcType=TIMESTAMP} ,
		        	#{omsOrderCode,javaType=String,jdbcType=VARCHAR} ,
		        	#{erpOrderCode,javaType=String,jdbcType=VARCHAR} ,
		        	#{suspendReasonType,javaType=Integer,jdbcType=INTEGER} ,
		        	#{specialType,javaType=Integer,jdbcType=INTEGER} ,
		        	#{orderStatus,javaType=Integer,jdbcType=INTEGER} ,
		        	#{orderType,javaType=Integer,jdbcType=INTEGER} ,
		        	#{deliveryType,javaType=Integer,jdbcType=INTEGER} ,
		        	#{isInstall,javaType=Boolean,jdbcType=INTEGER} ,
		        	#{installCompanyCode,javaType=String,jdbcType=VARCHAR} ,
		        	#{installCompanyName,javaType=String,jdbcType=VARCHAR} ,
		        	#{financeStatus,javaType=Integer,jdbcType=INTEGER} ,
		        	#{homeDeliveryFee,javaType=java.math.BigDecimal,jdbcType=DECIMAL} ,
		        	#{deliveryAndInstallFee,javaType=java.math.BigDecimal,jdbcType=DECIMAL} ,
		        	#{installFee,javaType=java.math.BigDecimal,jdbcType=DECIMAL} ,
		        	#{serviceItemFee,javaType=java.math.BigDecimal,jdbcType=DECIMAL} ,
		        	#{financeTotalAmount,javaType=java.math.BigDecimal,jdbcType=DECIMAL} ,
		        	#{payAccount,javaType=String,jdbcType=VARCHAR} ,
		        	#{payNo,javaType=String,jdbcType=VARCHAR} ,
		        	#{companyShop,javaType=Long,jdbcType=INTEGER} ,
		        	#{salesModesStr,javaType=String,jdbcType=VARCHAR} ,
		        	#{createTime,javaType=java.util.Date,jdbcType=TIMESTAMP} ,
		        	#{warehouseCode,javaType=String,jdbcType=VARCHAR} ,
		        	#{syncToErpTime,javaType=java.util.Date,jdbcType=TIMESTAMP} ,
		        	#{erpResponseTime,javaType=java.util.Date,jdbcType=TIMESTAMP} ,
		        	#{cancelTime,javaType=java.util.Date,jdbcType=TIMESTAMP} ,
		        	#{transToWarehouseTime,javaType=java.util.Date,jdbcType=TIMESTAMP} ,
		        	#{stockOutTime,javaType=java.util.Date,jdbcType=TIMESTAMP} ,
		        	#{finishTime,javaType=java.util.Date,jdbcType=TIMESTAMP} ,
		        	#{headDiscount,javaType=java.math.BigDecimal,jdbcType=DECIMAL} ,
		        	#{linesDiscount,javaType=java.math.BigDecimal,jdbcType=DECIMAL} ,
		        	#{discountTotal,javaType=java.math.BigDecimal,jdbcType=DECIMAL} ,
		        	#{amountBeforeDiscount,javaType=java.math.BigDecimal,jdbcType=DECIMAL} ,
		        	#{amountAfterDiscount,javaType=java.math.BigDecimal,jdbcType=DECIMAL} ,
		        	#{paymentDiscount,javaType=java.math.BigDecimal,jdbcType=DECIMAL} ,
		        	#{totalOuterPoint,javaType=java.math.BigDecimal,jdbcType=DECIMAL} ,
		        	#{totalInnerPoint,javaType=java.math.BigDecimal,jdbcType=DECIMAL} ,
		        	#{usePoint,javaType=java.math.BigDecimal,jdbcType=DECIMAL} ,
		        	#{virtualAmount,javaType=java.math.BigDecimal,jdbcType=DECIMAL} ,
		        	#{mainPaymentType,javaType=Integer,jdbcType=INTEGER} ,
		        	#{transFee,javaType=java.math.BigDecimal,jdbcType=DECIMAL} ,
		        	#{sellerMemo,javaType=String,jdbcType=VARCHAR} ,
		        	#{buyerMemo,javaType=String,jdbcType=VARCHAR} ,
		        	#{sysMemo,javaType=String,jdbcType=VARCHAR} ,
		        	#{neededPacking,javaType=Integer,jdbcType=INTEGER} ,
		        	#{needInvoice,javaType=Integer,jdbcType=INTEGER} ,
		        	#{isBillingManual,javaType=Integer,jdbcType=INTEGER} ,
		        	#{invoiceMemo,javaType=String,jdbcType=VARCHAR} ,
		        	#{invoiceType,javaType=Integer,jdbcType=INTEGER} ,
		        	#{invoiceTitle,javaType=String,jdbcType=VARCHAR} ,
		        	#{invoiceContent,javaType=String,jdbcType=VARCHAR} ,
		        	#{isBillingInvoiceDetail,javaType=Integer,jdbcType=INTEGER} ,
		        	#{vaTaxCompanyName,javaType=String,jdbcType=VARCHAR} ,
		        	#{vaTaxCode,javaType=String,jdbcType=VARCHAR} ,
		        	#{vaTaxRegisterAddress,javaType=String,jdbcType=VARCHAR} ,
		        	#{vaTaxTelephone,javaType=String,jdbcType=VARCHAR} ,
		        	#{vaTaxBankName,javaType=String,jdbcType=VARCHAR} ,
		        	#{vaTaxBankCard,javaType=String,jdbcType=VARCHAR} ,
		        	#{sourceRemark,javaType=String,jdbcType=VARCHAR} ,
		        	#{platformSource,javaType=String,jdbcType=VARCHAR} ,
		        	#{terminalSource,javaType=String,jdbcType=VARCHAR} ,
		        	#{activitySource,javaType=String,jdbcType=VARCHAR} ,
		        	#{subOrderSource,javaType=String,jdbcType=VARCHAR} ,
		        	#{isCycle,javaType=Integer,jdbcType=INTEGER} ,
		        	#{isPresale,javaType=Integer,jdbcType=INTEGER} ,
		        	#{estArrivalTime,javaType=java.util.Date,jdbcType=TIMESTAMP} ,
		        	#{wfBranch,javaType=Integer,jdbcType=INTEGER} ,
		        	#{creator,javaType=Integer,jdbcType=INTEGER} ,
		        	#{lastModifyUser,javaType=Integer,jdbcType=INTEGER} ,
		        	#{version,javaType=java.util.Date,jdbcType=TIMESTAMP} ,
		        	#{vmiPromotionCode,javaType=String,jdbcType=VARCHAR} ,
		        	#{splitSourceOmsOrderCode,javaType=String,jdbcType=VARCHAR} ,
		        	#{copySourceOmsOrderCode,javaType=String,jdbcType=VARCHAR} ,
		        	#{raOmsOrderCode,javaType=String,jdbcType=VARCHAR} ,
		        	#{posSales,javaType=java.math.BigDecimal,jdbcType=DECIMAL} ,
		        	#{originalPocn,javaType=String,jdbcType=VARCHAR} ,
		        	#{sourceType,javaType=Integer,jdbcType=INTEGER} ,
		        	#{extVc1,javaType=java.math.BigDecimal,jdbcType=DECIMAL} ,
		        	#{extVc2,javaType=java.math.BigDecimal,jdbcType=DECIMAL} ,
		        	#{extVc3,javaType=java.math.BigDecimal,jdbcType=DECIMAL} ,
		        	#{toWhRemark,javaType=String,jdbcType=VARCHAR} ,
		        	#{careGrade,javaType=Integer,jdbcType=INTEGER} ,
		        	#{careMomo,javaType=String,jdbcType=VARCHAR} ,
		        	#{isCloudStackSo,javaType=Boolean,jdbcType=TINYINT} ,
		        	#{mainBranchWhCode,javaType=String,jdbcType=VARCHAR} ,
		        	#{isAutoWh,javaType=Boolean,jdbcType=TINYINT} ,
		        	#{goodsWeight,javaType=java.math.BigDecimal,jdbcType=DECIMAL} ,
		        	#{alipayId,javaType=Long,jdbcType=BIGINT} ,
		        	#{creditCardFee,javaType=java.math.BigDecimal,jdbcType=DECIMAL} ,
		        	#{platformTradeType,javaType=String,jdbcType=VARCHAR} ,
		        	#{isDirectWmsOrder,javaType=Integer,jdbcType=TINYINT} ,
		        	#{splitOrderTime,javaType=java.util.Date,jdbcType=TIMESTAMP} ,
		        	#{isAssignWh,javaType=Boolean,jdbcType=INTEGER} ,
		        	#{invoiceKind,javaType=Boolean,jdbcType=BIT} ,
		        	#{orderTaxFee,javaType=java.math.BigDecimal,jdbcType=DECIMAL} ,
		        	#{isBundle,javaType=Boolean,jdbcType=BIT} ,
		        	#{customizationMemo,javaType=String,jdbcType=VARCHAR} ,
		        	#{orderRouteStatus,javaType=Integer,jdbcType=INTEGER} ,
		        	#{isOrderRoute,javaType=Boolean,jdbcType=BIT} ,
		        	#{isOmnichannelParam,javaType=Boolean,jdbcType=BIT} ,
		        	#{targetCode,javaType=String,jdbcType=VARCHAR} ,
		        	#{updateRouteTime,javaType=java.util.Date,jdbcType=TIMESTAMP} ,
		        	#{allocationCode,javaType=String,jdbcType=VARCHAR} ,
		        	#{buyerTaxNO,javaType=String,jdbcType=VARCHAR} ,
		        	#{stepPaidFee,javaType=java.math.BigDecimal,jdbcType=DECIMAL} ,
		        	#{isAddrChanged,javaType=Boolean,jdbcType=TINYINT} ,
		        	#{businessType,javaType=Integer,jdbcType=INTEGER} ,
		        	#{whLocationCode,javaType=String,jdbcType=VARCHAR} ,
		        	#{isSupportPrePackage,javaType=Integer,jdbcType=TINYINT} ,
		        	#{stepPayTime,javaType=java.util.Date,jdbcType=TIMESTAMP} ,
		        	#{originalTargetCode,javaType=String,jdbcType=VARCHAR} ,
		        	#{tagName,javaType=String,jdbcType=VARCHAR} ,
		        	#{transType,javaType=Integer,jdbcType=TINYINT} ,
		        	#{couponFee,javaType=java.math.BigDecimal,jdbcType=DECIMAL}
		        )
		    ]]>

    </insert>


    <update id="updateSuspendReasonType"></update>
    <select id="findSoByCodeShopId" resultType="io.vitess.model.so.SalesOrder"></select>
    <select id="queryCheckHandCreateOrder" resultType="java.lang.Integer"></select>
</mapper>