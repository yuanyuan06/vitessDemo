<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="io.vitess.dao.mq.MqDeliveryInfoLogDao">

	<resultMap id="TmqDeliveryInfoLogResult" type="io.vitess.model.mq.MqDeliveryInfoLog">
	</resultMap>

	<!-- 用于select查询公用抽取的列 -->
	<sql id="tmqDeliveryInfoLogColumns">
		<![CDATA[
	        	id as id,
	        	version as version,
	        	receiver as receiver,
	        	contact_person as contactPerson,
	        	country as country,
	        	province as province,
	        	city as city,
	        	district as district,
	        	address as address,
	        	zipcode as zipCode,
	        	receiver_phone as receiverPhone,
	        	receiver_mobile as receiverMobile,
	        	user_name as userName,
	        	membre_email as memberEmail,
	        	lp_code as lpCode,
	        	so_log_id as soLog,
	        	given_name as givenName,
	        	family_name as familyName,
	        	trans_service_type as transServiceType,
	        	trans_time_type as transTimeType,
	        	remark as remark,
	        	town as town,
	        	SHOP_ID as shopId
	    ]]>
	</sql>

    <select id="getMqDeliveryInfoLogsBySoLogId" resultType="io.vitess.model.mq.MqDeliveryInfoLog">
        SELECT
				t.id,
				t.version,
				t.receiver,
				t.contact_person,
				t.country,
				t.province,
				t.city,
				t.district,
				t.address,
				t.zipcode,
				t.receiver_phone,
				t.receiver_mobile,
				t.user_name,
				t.membre_email,
				t.lp_code,
				t.so_log_id
			FROM
				t_mq_delivery_info_log t
			<where>
                <if test="soLog != null and soLog != ''">
				  and t.SO_LOG_ID = #{soLog}
                </if>
			    <if test="shopId != null and shopId != ''">
                  AND t.SHOP_ID = #{shopId}
                </if>
            </where>

    </select>

	<insert id="insert" parameterType="io.vitess.model.mq.MqDeliveryInfoLog" flushCache="true" useGeneratedKeys="true" keyProperty="id" keyColumn="id">
		        INSERT INTO
		        t_mq_delivery_info_log (
		        id,
		        	version ,
		        	receiver ,
		        	contact_person ,
		        	country ,
		        	province ,
		        	city ,
		        	district ,
		        	address ,
		        	zipcode ,
		        	receiver_phone ,
		        	receiver_mobile ,
		        	user_name ,
		        	membre_email ,
		        	lp_code ,
		        	so_log_id ,
		        	given_name ,
		        	family_name ,
		        	trans_service_type ,
		        	trans_time_type ,
		        	remark ,
		        	town ,
		        	SHOP_ID
		        ) VALUES (
		        #{id,javaType=java.lang.Long,jdbcType=BIGINT} ,
		        	#{version,javaType=java.util.Date,jdbcType=TIMESTAMP} ,
		        	#{receiver,javaType=String,jdbcType=VARCHAR} ,
		        	#{contactPerson,javaType=String,jdbcType=VARCHAR} ,
		        	#{country,javaType=String,jdbcType=VARCHAR} ,
		        	#{province,javaType=String,jdbcType=VARCHAR} ,
		        	#{city,javaType=String,jdbcType=VARCHAR} ,
		        	#{district,javaType=String,jdbcType=VARCHAR} ,
		        	#{address,javaType=String,jdbcType=VARCHAR} ,
		        	#{zipCode,javaType=String,jdbcType=VARCHAR} ,
		        	#{receiverPhone,javaType=String,jdbcType=VARCHAR} ,
		        	#{receiverMobile,javaType=String,jdbcType=VARCHAR} ,
		        	#{userName,javaType=String,jdbcType=VARCHAR} ,
		        	#{memberEmail,javaType=String,jdbcType=VARCHAR} ,
		        	#{lpCode,javaType=String,jdbcType=VARCHAR} ,
		        	#{soLog,javaType=Long,jdbcType=BIGINT} ,
		        	#{givenName,javaType=String,jdbcType=VARCHAR} ,
		        	#{familyName,javaType=String,jdbcType=VARCHAR} ,
		        	#{transServiceType,javaType=Integer,jdbcType=INTEGER} ,
		        	#{transTimeType,javaType=Integer,jdbcType=INTEGER} ,
		        	#{remark,javaType=String,jdbcType=VARCHAR} ,
		        	#{town,javaType=String,jdbcType=VARCHAR} ,
		        	#{shopId,javaType=Long,jdbcType=BIGINT}
		        )
	</insert>

	<select id="findById" parameterType="java.lang.Long" resultMap="TmqDeliveryInfoLogResult" flushCache="false">
		select <include refid="tmqDeliveryInfoLogColumns" />
			    from t_mq_delivery_info_log
		        where
		        id = #{id}
	</select>
</mapper>