<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="io.vitess.dao.mq.MqSoLineLogDao">


    <resultMap id="TmqSoLineLogResult" type="io.vitess.model.mq.MqSoLineLog">
    </resultMap>

    <!-- 用于select查询公用抽取的列 -->
    <sql id="tmqSoLineLogColumns">
        <![CDATA[
	        	id as id,
	        	version as version,
	        	jmsku_code as jmskuCode,
	        	bar_code as barCode,
	        	qty as qty,
	        	unit_price as unitPrice,
	        	total_actual as totalActual,
	        	so_log_id as soLogId,
	        	sku_combo_remark as skuComboRemark,
	        	extention_code as extentionCode,
	        	list_price as listPrice,
	        	md_price as mdPrice,
	        	coupon_code as couponCode,
	        	discount_fee as discountFee,
	        	line_total as lineTotal,
	        	line_unit_price as lineUnitPrice,
	        	final_total_actual as finalTotalActual,
	        	final_unit_price as finalUnitPrice,
	        	total_point_used as totalPointUsed,
	        	ext_prop1 as extProp1,
	        	platform_line_id as platformLineId,
	        	outer_point_value as outerPointValue,
	        	inner_point_value as innerPointValue,
	        	other_vc as otherVc,
	        	platform_source as platformSource,
	        	platform_sku_name as platformSkuName,
	        	warranty_months as warrantyMonths,
	        	platform_wh_code as platformWhCode,
	        	is_prezzie as isPrezzie,
	        	EST_CON_TIME as estConTime,
	        	PIC_PATH as picPath,
	        	SHOP_ID as shopId,
	        	SUB_ORDER_TAX_FEE as subOrderTaxFee,
	        	ASSEMBLY_RELA as assemblyRela,
	        	PART_MJZ_DISCOUNT as partMjzDiscount,
	        	TOTAL_FEE as totalFee,
	        	targetCode as targetCode,
	        	TARGET_CODE as targetCode,
	        	TARGET_TYPE as targetType,
	        	ALLOCATION_CODE as allocationCode,
	        	FQG_NUM as fqgNum,
	        	IS_FQG_S_FEE as isFqgSfee,
	        	ALLOCATION_TYPE as allocationType,
	        	PLATFORM_SKU_ID as platformSkuId,
	        	COUPON_FEE as couponFee
	    ]]>
    </sql>

    <!-- useGeneratedKeys="true" keyProperty="xxx" for sqlserver and mysql -->
    <insert id="insert" parameterType="io.vitess.model.mq.MqSoLineLog" flushCache="true">
        <![CDATA[
		        INSERT INTO
		        t_mq_so_line_log (
		        id,
		        	version ,
		        	jmsku_code ,
		        	bar_code ,
		        	qty ,
		        	unit_price ,
		        	total_actual ,
		        	so_log_id ,
		        	sku_combo_remark ,
		        	extention_code ,
		        	list_price ,
		        	md_price ,
		        	coupon_code ,
		        	discount_fee ,
		        	line_total ,
		        	line_unit_price ,
		        	final_total_actual ,
		        	final_unit_price ,
		        	total_point_used ,
		        	ext_prop1 ,
		        	platform_line_id ,
		        	outer_point_value ,
		        	inner_point_value ,
		        	other_vc ,
		        	platform_source ,
		        	platform_sku_name ,
		        	warranty_months ,
		        	platform_wh_code ,
		        	is_prezzie ,
		        	EST_CON_TIME ,
		        	PIC_PATH ,
		        	SHOP_ID ,
		        	SUB_ORDER_TAX_FEE ,
		        	ASSEMBLY_RELA ,
		        	PART_MJZ_DISCOUNT ,
		        	TOTAL_FEE ,
		        	targetCode ,
		        	TARGET_CODE ,
		        	TARGET_TYPE ,
		        	ALLOCATION_CODE ,
		        	FQG_NUM ,
		        	IS_FQG_S_FEE ,
		        	ALLOCATION_TYPE ,
		        	PLATFORM_SKU_ID ,
		        	COUPON_FEE
		        ) VALUES (
		        #{id,javaType=java.lang.Long,jdbcType=BIGINT} ,
		        	#{version,javaType=java.util.Date,jdbcType=TIMESTAMP} ,
		        	#{jmskuCode,javaType=String,jdbcType=VARCHAR} ,
		        	#{barCode,javaType=String,jdbcType=VARCHAR} ,
		        	#{qty,javaType=Integer,jdbcType=INTEGER} ,
		        	#{unitPrice,javaType=java.math.BigDecimal,jdbcType=DECIMAL} ,
		        	#{totalActual,javaType=java.math.BigDecimal,jdbcType=DECIMAL} ,
		        	#{soLogId,javaType=Long,jdbcType=BIGINT} ,
		        	#{skuComboRemark,javaType=String,jdbcType=VARCHAR} ,
		        	#{extentionCode,javaType=String,jdbcType=VARCHAR} ,
		        	#{listPrice,javaType=java.math.BigDecimal,jdbcType=DECIMAL} ,
		        	#{mdPrice,javaType=java.math.BigDecimal,jdbcType=DECIMAL} ,
		        	#{couponCode,javaType=String,jdbcType=VARCHAR} ,
		        	#{discountFee,javaType=java.math.BigDecimal,jdbcType=DECIMAL} ,
		        	#{lineTotal,javaType=java.math.BigDecimal,jdbcType=DECIMAL} ,
		        	#{lineUnitPrice,javaType=java.math.BigDecimal,jdbcType=DECIMAL} ,
		        	#{finalTotalActual,javaType=java.math.BigDecimal,jdbcType=DECIMAL} ,
		        	#{finalUnitPrice,javaType=java.math.BigDecimal,jdbcType=DECIMAL} ,
		        	#{totalPointUsed,javaType=java.math.BigDecimal,jdbcType=DECIMAL} ,
		        	#{extProp1,javaType=String,jdbcType=VARCHAR} ,
		        	#{platformLineId,javaType=String,jdbcType=VARCHAR} ,
		        	#{outerPointValue,javaType=java.math.BigDecimal,jdbcType=DECIMAL} ,
		        	#{innerPointValue,javaType=java.math.BigDecimal,jdbcType=DECIMAL} ,
		        	#{otherVc,javaType=java.math.BigDecimal,jdbcType=DECIMAL} ,
		        	#{platformSource,javaType=String,jdbcType=VARCHAR} ,
		        	#{platformSkuName,javaType=String,jdbcType=VARCHAR} ,
		        	#{warrantyMonths,javaType=Integer,jdbcType=INTEGER} ,
		        	#{platformWhCode,javaType=String,jdbcType=VARCHAR} ,
		        	#{isPrezzie,javaType=Integer,jdbcType=INTEGER} ,
		        	#{estConTime,javaType=String,jdbcType=VARCHAR} ,
		        	#{picPath,javaType=String,jdbcType=VARCHAR} ,
		        	#{shopId,javaType=Long,jdbcType=BIGINT} ,
		        	#{subOrderTaxFee,javaType=java.math.BigDecimal,jdbcType=DECIMAL} ,
		        	#{assemblyRela,javaType=Long,jdbcType=BIGINT} ,
		        	#{partMjzDiscount,javaType=java.math.BigDecimal,jdbcType=DECIMAL} ,
		        	#{totalFee,javaType=java.math.BigDecimal,jdbcType=DECIMAL} ,
		        	#{targetCode,javaType=String,jdbcType=VARCHAR} ,
		        	#{targetCode,javaType=String,jdbcType=VARCHAR} ,
		        	#{targetType,javaType=String,jdbcType=VARCHAR} ,
		        	#{allocationCode,javaType=String,jdbcType=VARCHAR} ,
		        	#{fqgNum,javaType=Integer,jdbcType=INTEGER} ,
		        	#{isFqgSfee,javaType=Integer,jdbcType=INTEGER} ,
		        	#{allocationType,javaType=String,jdbcType=VARCHAR} ,
		        	#{platformSkuId,javaType=Long,jdbcType=BIGINT} ,
		        	#{couponFee,javaType=java.math.BigDecimal,jdbcType=DECIMAL}
		        )
		    ]]>

    </insert>



    <select id="getMqMqSoLineLogsBySoLogId" resultType="io.vitess.model.mq.MqSoLineLog">
        select
		       		t.id,
		       		t.version,
		       		t.jmsku_code,
		       		t.bar_code,
		       		t.qty,
		       		t.unit_price,
		       		t.total_actual,
		       		t.so_log_id,
		       		t.extention_code,
		       		t.list_price,
		       		t.md_price,
		       		t.coupon_code,
		       		t.discount_fee,
		       		t.total_point_used,
		       		t.ext_prop1,
		       		t.platform_line_id,
		       		t.outer_point_value,
		       		t.inner_point_value,
		       		t.other_vc,
		       		t.platform_source,
		       		t.platform_wh_code,
		       		t.platform_sku_name,
		       		t.est_con_time,
		       		t.PIC_PATH picPath,
		       		t.SUB_ORDER_TAX_FEE subOrderTaxFee,
		       		t.ASSEMBLY_RELA assemblyRela,
		       		t.TOTAL_FEE totalFee,
		       		t.TARGET_CODE targetCode,
		       		t.TARGET_TYPE targetType,
		       		t.ALLOCATION_CODE
	       		 from
	       		 	t_mq_so_line_log t
                <where>
                    <if test="soLogId != null and soLogId != ''">
                         and t.SO_LOG_ID=#{soLogId}
                    </if>
                    <if test="shopId != null and shopId != ''">
                         AND t.SHOP_ID = #{shopId}
                    </if>
                </where>

    </select>

    <select id="findById" parameterType="java.lang.Long" resultMap="TmqSoLineLogResult" flushCache="false">
        select <include refid="tmqSoLineLogColumns" />
        <![CDATA[
			    from t_mq_so_line_log
		        where
		        id = #{id}
		    ]]>
    </select>
</mapper>